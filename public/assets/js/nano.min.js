/*! nanoScrollerJS - v0.8.0 - 2014
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2014 James Florentino; Licensed MIT */
(function(g,o,A){var c,q,j,D,d,e,a,s,z,m,E,F,b,r,y,C,k,f,u,p,t,w,i,l,B,v,n,x,h;t={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:false,preventPageScrolling:false,disableResize:false,alwaysVisible:false,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null};C="scrollbar";y="scroll";s="mousedown";z="mousemove";E="mousewheel";m="mouseup";r="resize";d="drag";f="up";b="panedown";j="DOMMouseScroll";D="down";u="wheel";e="keydown";a="keyup";k="touchmove";c=o.navigator.appName==="Microsoft Internet Explorer"&&/msie 7./i.test(o.navigator.appVersion)&&o.ActiveXObject;q=null;B=o.requestAnimationFrame;p=o.cancelAnimationFrame;n=A.createElement("div").style;h=(function(){var I,H,L,K,J,G;K=["t","webkitT","MozT","msT","OT"];for(I=J=0,G=K.length;J<G;I=++J){L=K[I];H=K[I]+"ransform";if(H in n){return K[I].substr(0,K[I].length-1)}}return false})();x=function(G){if(h===false){return false}if(h===""){return G}return h+G.charAt(0).toUpperCase()+G.substr(1)};v=x("transform");i=v!==false;w=function(){var G,I,H;G=A.createElement("div");I=G.style;I.position="absolute";I.width="100px";I.height="100px";I.overflow=y;I.top="-9999px";A.body.appendChild(G);H=G.offsetWidth-G.clientWidth;A.body.removeChild(G);return H};l=function(){var I,H,G;H=o.navigator.userAgent;I=/(?=.+Mac OS X)(?=.+Firefox)/.test(H);if(!I){return false}G=/Firefox\/\d{2}\./.exec(H);if(G){G=G[0].replace(/\D+/g,"")}return I&&+G>23};F=(function(){function G(I,H){this.el=I;this.options=H;q||(q=w());this.$el=g(this.el);this.doc=g(this.options.documentContext||A);this.win=g(this.options.windowContext||o);this.$content=this.$el.children("."+H.contentClass);this.$content.attr("tabindex",this.options.tabIndex||0);this.content=this.$content[0];if(this.options.iOSNativeScrolling&&(this.el.style.WebkitOverflowScrolling!=null)){this.nativeScrolling()}else{this.generate()}this.createEvents();this.addEvents();this.reset()}G.prototype.preventScrolling=function(I,H){if(!this.isActive){return}if(I.type===j){if(H===D&&I.originalEvent.detail>0||H===f&&I.originalEvent.detail<0){I.preventDefault()}}else{if(I.type===E){if(!I.originalEvent||!I.originalEvent.wheelDelta){return}if(H===D&&I.originalEvent.wheelDelta<0||H===f&&I.originalEvent.wheelDelta>0){I.preventDefault()}}}};G.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"});this.iOSNativeScrolling=true;this.isActive=true};G.prototype.updateScrollValues=function(){var H;H=this.content;this.maxScrollTop=H.scrollHeight-H.clientHeight;this.prevScrollTop=this.contentScrollTop||0;this.contentScrollTop=H.scrollTop;if(!this.iOSNativeScrolling){this.maxSliderTop=this.paneHeight-this.sliderHeight;this.sliderTop=this.maxScrollTop===0?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop}};G.prototype.setOnScrollStyles=function(){var H;if(i){H={};H[v]="translate(0, "+this.sliderTop+"px)"}else{H={top:this.sliderTop}}if(B){if(!this.scrollRAF){this.scrollRAF=B((function(I){return function(){I.scrollRAF=null;I.slider.css(H)}})(this))}}else{this.slider.css(H)}};G.prototype.createEvents=function(){this.events={down:(function(H){return function(I){H.isBeingDragged=true;H.offsetY=I.pageY-H.slider.offset().top;H.pane.addClass("active");H.doc.bind(z,H.events[d]).bind(m,H.events[f]);return false}})(this),drag:(function(H){return function(I){H.sliderY=I.pageY-H.$el.offset().top-H.offsetY;H.scroll();if(H.contentScrollTop>=H.maxScrollTop&&H.prevScrollTop!==H.maxScrollTop){H.$el.trigger("scrollend")}else{if(H.contentScrollTop===0&&H.prevScrollTop!==0){H.$el.trigger("scrolltop")}}return false}})(this),up:(function(H){return function(I){H.isBeingDragged=false;H.pane.removeClass("active");H.doc.unbind(z,H.events[d]).unbind(m,H.events[f]);return false}})(this),resize:(function(H){return function(I){H.reset()}})(this),panedown:(function(H){return function(I){H.sliderY=(I.offsetY||I.originalEvent.layerY)-(H.sliderHeight*0.5);H.scroll();H.events.down(I);return false}})(this),scroll:(function(H){return function(I){H.updateScrollValues();if(H.isBeingDragged){return}if(!H.iOSNativeScrolling){H.sliderY=H.sliderTop;H.setOnScrollStyles()}if(I==null){return}if(H.contentScrollTop>=H.maxScrollTop){if(H.options.preventPageScrolling){H.preventScrolling(I,D)}if(H.prevScrollTop!==H.maxScrollTop){H.$el.trigger("scrollend")}}else{if(H.contentScrollTop===0){if(H.options.preventPageScrolling){H.preventScrolling(I,f)}if(H.prevScrollTop!==0){H.$el.trigger("scrolltop")}}}}})(this),wheel:(function(H){return function(I){var J;if(I==null){return}J=I.delta||I.wheelDelta||(I.originalEvent&&I.originalEvent.wheelDelta)||-I.detail||(I.originalEvent&&-I.originalEvent.detail);if(J){H.sliderY+=-J/3}H.scroll();return false}})(this)}};G.prototype.addEvents=function(){var H;this.removeEvents();H=this.events;if(!this.options.disableResize){this.win.bind(r,H[r])}if(!this.iOSNativeScrolling){this.slider.bind(s,H[D]);this.pane.bind(s,H[b]).bind(""+E+" "+j,H[u])}this.$content.bind(""+y+" "+E+" "+j+" "+k,H[y])};G.prototype.removeEvents=function(){var H;H=this.events;this.win.unbind(r,H[r]);if(!this.iOSNativeScrolling){this.slider.unbind();this.pane.unbind()}this.$content.unbind(""+y+" "+E+" "+j+" "+k,H[y])};G.prototype.generate=function(){var J,K,L,I,H,M;I=this.options;H=I.paneClass,M=I.sliderClass,J=I.contentClass;if(!this.$el.find("."+H).length&&!this.$el.find("."+M).length){this.$el.append('<div class="'+H+'"><div class="'+M+'" /></div>')}this.pane=this.$el.children("."+H);this.slider=this.pane.find("."+M);if(q===0&&l()){L=o.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/\D+/g,"");K={right:-14,paddingRight:+L+14}}else{if(q){K={right:-q};this.$el.addClass("has-scrollbar")}}if(K!=null){this.$content.css(K)}return this};G.prototype.restore=function(){this.stopped=false;if(!this.iOSNativeScrolling){this.pane.show()}this.addEvents()};G.prototype.reset=function(){var N,P,R,S,I,J,H,L,K,O,Q,M;if(this.iOSNativeScrolling){this.contentHeight=this.content.scrollHeight;return}if(!this.$el.find("."+this.options.paneClass).length){this.generate().stop()}if(this.stopped){this.restore()}N=this.content;S=N.style;I=S.overflowY;if(c){this.$content.css({height:this.$content.height()})}P=N.scrollHeight+q;O=parseInt(this.$el.css("max-height"),10);if(O>0){this.$el.height("");this.$el.height(N.scrollHeight>O?O:N.scrollHeight)}H=this.pane.outerHeight(false);K=parseInt(this.pane.css("top"),10);J=parseInt(this.pane.css("bottom"),10);L=H+K+J;M=Math.round(L/P*L);if(M<this.options.sliderMinHeight){M=this.options.sliderMinHeight}else{if((this.options.sliderMaxHeight!=null)&&M>this.options.sliderMaxHeight){M=this.options.sliderMaxHeight}}if(I===y&&S.overflowX!==y){M+=q}this.maxSliderTop=L-M;this.contentHeight=P;this.paneHeight=H;this.paneOuterHeight=L;this.sliderHeight=M;this.slider.height(M);this.events.scroll();this.pane.show();this.isActive=true;if((N.scrollHeight===N.clientHeight)||(this.pane.outerHeight(true)>=N.scrollHeight&&I!==y)){this.pane.hide();this.isActive=false}else{if(this.el.clientHeight===N.scrollHeight&&I===y){this.slider.hide()}else{this.slider.show()}}this.pane.css({opacity:(this.options.alwaysVisible?1:""),visibility:(this.options.alwaysVisible?"visible":"")});R=this.$content.css("position");if(R==="static"||R==="relative"){Q=parseInt(this.$content.css("right"),10);if(Q){this.$content.css({right:"",marginRight:Q})}}return this};G.prototype.scroll=function(){if(!this.isActive){return}this.sliderY=Math.max(0,this.sliderY);this.sliderY=Math.min(this.maxSliderTop,this.sliderY);this.$content.scrollTop((this.paneHeight-this.contentHeight+q)*this.sliderY/this.maxSliderTop*-1);if(!this.iOSNativeScrolling){this.updateScrollValues();this.setOnScrollStyles()}return this};G.prototype.scrollBottom=function(H){if(!this.isActive){return}this.$content.scrollTop(this.contentHeight-this.$content.height()-H).trigger(E);this.stop().restore();return this};G.prototype.scrollTop=function(H){if(!this.isActive){return}this.$content.scrollTop(+H).trigger(E);this.stop().restore();return this};G.prototype.scrollTo=function(H){if(!this.isActive){return}this.scrollTop(this.$el.find(H).get(0).offsetTop);return this};G.prototype.stop=function(){if(p&&this.scrollRAF){p(this.scrollRAF);this.scrollRAF=null}this.stopped=true;this.removeEvents();if(!this.iOSNativeScrolling){this.pane.hide()}return this};G.prototype.destroy=function(){if(!this.stopped){this.stop()}if(!this.iOSNativeScrolling&&this.pane.length){this.pane.remove()}if(c){this.$content.height("")}this.$content.removeAttr("tabindex");if(this.$el.hasClass("has-scrollbar")){this.$el.removeClass("has-scrollbar");this.$content.css({right:""})}return this};G.prototype.flash=function(){if(this.iOSNativeScrolling){return}if(!this.isActive){return}this.reset();this.pane.addClass("flashed");setTimeout((function(H){return function(){H.pane.removeClass("flashed")}})(this),this.options.flashDelay);return this};return G})();g.fn.nanoScroller=function(G){return this.each(function(){var H,I;if(!(I=this.nanoscroller)){H=g.extend({},t,G);this.nanoscroller=I=new F(this,H)}if(G&&typeof G==="object"){g.extend(I.options,G);if(G.scrollBottom!=null){return I.scrollBottom(G.scrollBottom)}if(G.scrollTop!=null){return I.scrollTop(G.scrollTop)}if(G.scrollTo){return I.scrollTo(G.scrollTo)}if(G.scroll==="bottom"){return I.scrollBottom(0)}if(G.scroll==="top"){return I.scrollTop(0)}if(G.scroll&&G.scroll instanceof g){return I.scrollTo(G.scroll)}if(G.stop){return I.stop()}if(G.destroy){return I.destroy()}if(G.flash){return I.flash()}}return I.reset()})};g.fn.nanoScroller.Constructor=F})(jQuery,window,document);